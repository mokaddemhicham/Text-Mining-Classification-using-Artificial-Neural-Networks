<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classification de Textes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='./style.css') }}">
</head>

<body>
   
    <div class="container">
        <h1 class="mt-3 text-center">Classification de Textes</h1>
        <div class="">
            <textarea id="textInput" class="form-control" rows="4" cols="50"
                placeholder="Entrez votre texte ici"></textarea>
        </div>
        <div class="d-flex justify-content-center mt-2">
            <button class="btn btn-primary w-100" onclick="predict()">Prédire</button>
        </div >
        <div class="d-flex justify-content-center mt-2">
            <div id="predictionResult" class="badge"></div>
        </div>
        
        
    </div>








    <script>
        function predict() {
            var textInput = document.getElementById("textInput").value;
            console.log(textInput);
            var data = { "text": textInput };

            fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(response => response.json())
                .then(data => {
                    var predictionResult = parseFloat(data.prediction);

                    var alertClass = predictionResult > 0 ? 'badge-success' : 'badge-danger';
                    var predictionText = predictionResult > 0 ? 'Good' : 'Not Good';
                    document.getElementById("predictionResult").innerText = predictionText;

                    document.getElementById("predictionResult").classList.remove('badge-success', 'badge-danger');
                    document.getElementById("predictionResult").classList.add(alertClass);





                    /*document.getElementById("predictionResult").innerText = "Prédiction : " + data.prediction;*/
                })
                .catch(error => {
                    console.error('Erreur lors de la prédiction:', error);
                });
        }

    </script>
</body>

</html>